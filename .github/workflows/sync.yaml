name: Copy Files
on:
  push:

jobs:
  copy-files:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout template
      uses: actions/checkout@v3
      with:
        repository: kudrinyaroslav/template
        ref: main
        fetch-depth: 0
        path: ./template
    - name: Checkout child
      uses: actions/checkout@v3
      with:
        repository: kudrinyaroslav/child
        ref: main
        fetch-depth: 0
        path: ./child
    - name: Copy files to child
      run: | 
       cp -r ./template/* ./child/
       ls ./child
       
    - name: Commit changes
      run: |
          cd child
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git checkout -b new-branch-name
          git add .
          git commit -m "Copy files from template to child"
          ls
          git push --set-upstream origin new-branch-name
          
    - name: Checkout new-branch-name
      uses: actions/checkout@v3
      with:
#         repository: kudrinyaroslav/child
        ref: new-branch-name
#         fetch-depth: 0
#         path: ./new-branch-name

    - name: Create pull request
      uses: peter-evans/create-pull-request@v4
#       with:
#         token: ${{ secrets.GITHUB_TOKEN }}
#         branch: main
#         title: "Copy files from template to child"
#         body: "This PR copies the necessary files from template to child"
#         draft: false
#         path: ./new-branch-name
#         base: new-branch-name
